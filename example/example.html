<!DOCTYPE html>
<meta charset="utf-8">
<html>
    <head>
        <link rel="stylesheet" href="../css/style.css" />
    </head>
    <body>
        <label for="delimiter">delimiter:</label>
        <input name="delimiter" type="checkbox" checked="true" onchange="updateDelimiter()">
        <script src="../node_modules/d3/d3.js"></script>
        <script src="../src/eventdrops.js"></script>
        <script>
            var body = document.getElementsByTagName('body')[0];

            var data = [];
            var endTime = Date.now();
            var oneMonth = 30 * 24 * 60 * 60 * 1000;
            var startTime = endTime - oneMonth;

            for (var i = 1; i <= 10; i++) {
                var event = {};
                event.name = "sample " + i;
                event.dates = [];

                var max =  Math.floor(Math.random() * 100);
                for (var j = 0; j < max; j++) {
                    var time = Math.floor((Math.random() * oneMonth)) + startTime;
                    event.dates.push(new Date(time));
                }

                data.push(event);
            }

            var graph = d3.chart.eventDrops({
                start: new Date(startTime),
                end: new Date(endTime)
            });

            var elements = d3.select(body).selectAll('div').data([data]).enter().append('div');
            graph(elements);

            var defaultDelimiter = graph.delimiter();
            var updateDelimiter = function (value) {
                if (graph.delimiter()) {
                    graph.delimiter(null);
                } else {
                    graph.delimiter(defaultDelimiter);
                }
                graph(elements);
            }

        </script>
    </body>
</html>
